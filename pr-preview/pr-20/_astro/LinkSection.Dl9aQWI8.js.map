{"version":3,"file":"LinkSection.Dl9aQWI8.js","sources":["../../node_modules/@semio-community/ecosystem-site-core/dist/components/detail/LinkSection.js","../../src/components/detail/LinkSection.tsx"],"sourcesContent":["import { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useMemo } from \"react\";\nimport { clsx } from \"clsx\";\nfunction defaultBuildLinks({ links, allowed, max }) {\n    if (!links)\n        return [];\n    const entries = Object.entries(links)\n        .filter(([type, href]) => Boolean(href) && (!allowed || allowed.includes(type)))\n        .map(([type, href]) => ({ type, href }));\n    if (typeof max === \"number\" && max > 0)\n        return entries.slice(0, max);\n    return entries;\n}\nexport const DetailLinkSection = ({ links, allowed, max, size = \"md\", className, as, stopPropagation, external, buildLinks, renderButton, }) => {\n    const buttons = useMemo(() => (buildLinks || defaultBuildLinks)({ links, allowed, max }), [links, allowed, max, buildLinks]);\n    if (!buttons.length)\n        return null;\n    return (_jsx(\"div\", { className: clsx(\"flex items-center justify-end gap-1 flex-nowrap overflow-x-auto\", className), children: buttons.map(({ type, href }) => (_jsx(React.Fragment, { children: renderButton({\n                type,\n                href,\n                size,\n                as,\n                external,\n                stopPropagation,\n            }) }, `${type}-${href}`))) }));\n};\nexport default DetailLinkSection;\n","import React from \"react\";\nimport {\n  DetailLinkSection as CoreLinkSection,\n  type DetailLinkSectionProps as CoreLinkSectionProps,\n  type BuildLinksArgs,\n} from \"@semio-community/ecosystem-site-core\";\nimport {\n  IconButton,\n  type IconButtonSize,\n  type LinkType,\n} from \"@/components/ui/IconButton\";\nimport { linkPriority, normalizeLinkHref } from \"@/data/links\";\n\nexport interface LinkSectionProps {\n  links?: Partial<Record<LinkType, string>>;\n  allowed?: LinkType[];\n  max?: number;\n  size?: IconButtonSize;\n  className?: string;\n  as?: \"button\" | \"link\";\n  stopPropagation?: boolean;\n  external?: boolean;\n}\n\nfunction buildPrioritizedLinks({\n  links,\n  allowed,\n  max,\n}: BuildLinksArgs) {\n  if (!links) return [];\n\n  const seen = new Set<string>();\n  const items: Array<{ type: string; href: string }> = [];\n\n  const pushIfValid = (type: string, raw?: string) => {\n    if (!raw) return;\n    if (allowed && !allowed.includes(type)) return;\n\n    const href = normalizeLinkHref(type as LinkType, raw);\n    const key = `${type}:${href}`;\n    if (seen.has(key)) return;\n\n    seen.add(key);\n    items.push({ type, href });\n  };\n\n  linkPriority.forEach((t) => {\n    pushIfValid(t, (links as Record<string, string>)[t]);\n  });\n\n  Object.entries(links).forEach(([rawType, raw]) => {\n    if (linkPriority.includes(rawType as LinkType)) return;\n    pushIfValid(rawType, raw || undefined);\n  });\n\n  const ordered = items.reverse();\n  return typeof max === \"number\" && max > 0 ? ordered.slice(0, max) : ordered;\n}\n\nexport const LinkSection: React.FC<LinkSectionProps> = ({\n  links,\n  allowed,\n  max,\n  size = \"md\",\n  className,\n  as,\n  stopPropagation,\n  external,\n}) => {\n  const normalizedLinks = links as unknown as Record<string, string> | undefined;\n\n  const props: CoreLinkSectionProps = {\n    links: normalizedLinks,\n    allowed: allowed as string[] | undefined,\n    max,\n    size,\n    className,\n    as,\n    stopPropagation,\n    external,\n    buildLinks: buildPrioritizedLinks,\n    renderButton: ({ type, href, size: btnSize, as: btnAs, external: btnExternal, stopPropagation: btnStop }) => (\n      <IconButton\n        type={type as LinkType}\n        href={href}\n        size={(btnSize as IconButtonSize) || size}\n        as={(btnAs as \"button\" | \"link\") || as}\n        external={btnExternal}\n        stopPropagation={btnStop}\n      />\n    ),\n  };\n\n  return <CoreLinkSection {...props} />;\n};\n\nexport default LinkSection;\n"],"names":["defaultBuildLinks","links","allowed","max","entries","type","href","DetailLinkSection","size","className","as","stopPropagation","external","buildLinks","renderButton","buttons","useMemo","_jsx","clsx","React","buildPrioritizedLinks","seen","items","pushIfValid","raw","normalizeLinkHref","key","linkPriority","t","rawType","ordered","LinkSection","props","btnSize","btnAs","btnExternal","btnStop","jsx","IconButton","CoreLinkSection"],"mappings":"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","x_google_ignoreList":[0]}