---
import PageLayout from "@/layouts/Base.astro";
import Section from "@/components/Section.astro";
import Hero from "@/components/Hero.astro";
import LinkCard from "@/components/LinkCard.astro";
import CallToActionButton from "@/components/CallToActionButton.astro";
import { url } from "@/utils/url";
import { Icon } from "astro-icon/components";
import { getAllHardware } from "@/data/hardware";
import { getAllSoftware } from "@/data/software";
import { getAllStudies } from "@/data/studies";
import { getCurrentEvents, getFeaturedEvents, getUpcomingEvents } from "@/data/events";

const allHardware = await getAllHardware();

// Fetch software from content collections
const allSoftware = await getAllSoftware();

// Fetch studies data - handle empty collection gracefully
const allStudies = await getAllStudies();

const projectCount = allHardware.length + allSoftware.length + allStudies.length;

const currentDate = new Date();

const currentEvents = await getCurrentEvents();
const upcomingEvents = await getUpcomingEvents();
const featuredOnlyEvents = await getFeaturedEvents();
const featuredEvents = [
  ...currentEvents.filter(
    (currentEvent) =>
      !featuredOnlyEvents.some((featured) => featured.id === currentEvent.id),
  ),
  ...upcomingEvents.filter(
    (upcomingEvent) =>
      !featuredOnlyEvents.some((featured) => featured.id === upcomingEvent.id),
  ),
  ...featuredOnlyEvents.filter((featuredEvent)=>featuredEvent.data.startDate > currentDate),
];

---

<PageLayout meta={{ title: "Home" }} noPaddingTop>
  <!-- Hero component full-width -->
  <div
    class="relative pt-16 md:pt-20 lg:pt-4 mb-8 sm:mb-12"
    style="width: 100vw; position: relative; left: 50%; right: 50%; margin-left: -50vw; margin-right: -50vw;"
  >
    <Hero>
      <!-- Tagline -->
      <h1
        class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-light text-foreground mb-3 sm:mb-4 md:mb-6"
      >
        <span class="text-accent-three font-semibold uppercase tracking-wide"
          >Reproducible</span
        >{" "}
        <span class="text-accent-one font-semibold uppercase tracking-wide"
          >Robot</span
        >
        <span class="text-accent-two font-semibold uppercase tracking-wide"
          >Science</span
        >
        {" "}
        <!-- <span class="uppercase tracking-wide"></span>{" "}
        <span class="text-accent-three font-semibold uppercase tracking-wide"
          >Robot</span
        >{" "}
        <span class="uppercase tracking-wide">Science</span>{" "} -->
      </h1>

      <!-- Subtitle -->
      <p
        class="text-sm sm:text-base md:text-lg lg:text-xl font-light text-color-600 dark:text-color-400 mb-8 sm:mb-10 md:mb-12 max-w-3xl mx-auto leading-relaxed px-2 sm:px-0"
      >
        A nonprofit supporting the{" "}<span class="font-medium text-foreground"
          >science and systems</span
        > of<br class="hidden md:flex" />
        <span class="font-medium text-foreground">human-centered robotics</span>
        and{" "}
        <span class="font-medium text-foreground">artificial intelligence</span>
      </p>

      <!-- CTA Button -->
      <!-- <CallToActionButton
        href="#connect"
        text="Join the Mailing List"
        size="large"
      /> -->
      <div class="flex flex-wrap justify-center gap-4 mb-8">
        <CallToActionButton
          href={url("projects")}
          text="Projects"
          size="large"
          indicatorText={projectCount.toString()}
        />
        <CallToActionButton
          href={url("services")}
          text="Services"
          size="large"
          variant="secondary"
          indicatorText="15"
        />
        <CallToActionButton
          href={url("events")}
          text="Events"
          size="large"
          variant="tertiary"
          indicatorText={featuredEvents?.length?.toString()}
        />
      </div>
    </Hero>
  </div>

  <!-- Mission Section -->
  <Section
    id="mission"
    title="Our Mission"
    subtitle="Advancing human-centered robotics and AI through community collaboration"
  >
    <div class="max-w-4xl mx-auto">

      <div class="bg-special-lighter rounded-lg p-8 border border-special mb-8">
        <p class="text-lg leading-relaxed text-center mb-6">
          Semio Community is a <span class="font-semibold"
            >501(c)(3) nonprofit organization</span
          > facilitating community-driven robotics hardware, software, and research
          to foster repeatable, reproducible, and replicable science and reusable
          systems within human-robot interaction (HRI).
        </p>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="text-center">
            <Icon
              name="hugeicons:user-multiple"
              class="w-12 h-12 mx-auto mb-3 text-accent-three"
            />
            <h3 class="font-semibold mb-2">Community-Driven</h3>
            <p class="text-sm text-accent-base/50">
              Fostering collaboration and knowledge sharing across disciplines
            </p>
          </div>
          <div class="text-center">
            <Icon
              name="solar:cpu-bolt-line-duotone"
              class="w-12 h-12 mx-auto mb-3 text-accent-two"
            />
            <h3 class="font-semibold mb-2">Human-Centered</h3>
            <p class="text-sm text-accent-base/50">
              Prioritizing ethical and accessible robotics and AI technologies
            </p>
          </div>
          <div class="text-center">
            <Icon
              name="hugeicons:book-open-01"
              class="w-12 h-12 mx-auto mb-3 text-accent-one"
            />
            <h3 class="font-semibold mb-2">Replicable Science</h3>
            <p class="text-sm text-accent-base/50">
              Promoting reproducible research and reusable systems
            </p>
          </div>
        </div>
      </div>

      <!-- <div
        class="bg-gradient-to-r from-accent-one/10 to-accent-two/10 rounded-lg p-8 border border-accent-one/20 mb-8"
      >
        <p class="text-lg leading-relaxed text-center">
          Semio Community is a <span class="font-semibold"
            >501(c)(3) nonprofit organization</span
          > facilitating community-driven robotics hardware, software, and studies
          to foster repeatable, reproducible, and replicable science and reusable
          systems within human-robot interaction (HRI).
        </p>
      </div> -->

      <div class="prose prose-citrus max-w-none">
        <p class="text-center text-color-600 dark:text-color-400">
          Founded with the belief that the future of robotics lies in
          collaborative innovation, we work to break down barriers between
          research and application, making cutting-edge robotics technology
          accessible to researchers, educators, and developers worldwide.
        </p>
      </div>
    </div>
  </Section>

  <!-- Quick Links Section -->
  <Section
    id="programs"
    title="Our Programs"
    subtitle="Discover our initiatives in hardware, software, and research"
    aria-label="Explore"
  >
    <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-0 overflow-x-hidden">
      <div
        class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6"
      >
        <LinkCard
          href={url("projects#hardware")}
          icon="solar:cpu-bolt-line-duotone"
          title="Hardware"
          description="Community-driven robotics platforms"
        />

        <LinkCard
          href={url("projects#software")}
          icon="solar:code-square-line-duotone"
          title="Software"
          description="Open-source tools and frameworks"
        />

        <LinkCard
          href={url("projects#studies")}
          icon="solar:test-tube-line-duotone"
          title="Studies"
          description="Reproducible research initiatives"
        />
      </div>
    </div>
  </Section>

  <Section
    id="partners"
    title="Our Partners"
    subtitle="Building the future of human-centered robotics and AI together"
  >
    <div class="max-w-4xl mx-auto">
      <div class="bg-special-lighter rounded-lg p-8 border border-special">
        <p class="text-lg leading-relaxed text-center mb-6">
          Semio Community actively encourages multidisciplinary collaboration
          among academia, industry, and the public sector to drive innovation,
          ethical practices, and the widespread adoption of human-centered
          robotics technologies.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="text-center">
            <Icon
              name="solar:square-academic-cap-line-duotone"
              class="w-12 h-12 mx-auto mb-3 text-accent-two"
            />
            <h3 class="font-semibold mb-2">Academia</h3>
            <p class="text-sm text-color-600 dark:text-color-400">
              Supporting research institutions with tools and infrastructure
            </p>
          </div>
          <div class="text-center">
            <Icon
              name="solar:buildings-2-line-duotone"
              class="w-12 h-12 mx-auto mb-3 text-accent-two"
            />
            <h3 class="font-semibold mb-2">Industry</h3>
            <p class="text-sm text-color-600 dark:text-color-400">
              Bridging the gap between research and commercial applications
            </p>
          </div>
          <div class="text-center">
            <Icon
              name="solar:flag-2-line-duotone"
              class="w-12 h-12 mx-auto mb-3 text-accent-two"
            />
            <h3 class="font-semibold mb-2">Public Sector</h3>
            <p class="text-sm text-color-600 dark:text-color-400">
              Partnering with government to advance robotics policy and
              standards
            </p>
          </div>
        </div>
      </div>
    </div>
  </Section>

  <!-- Connect Section -->
  <Section
    id="connect"
    title="Connect With Us"
    subtitle="Join our community and stay informed about our initiatives"
    aria-label="Connect"
  >
    <div class="max-w-4xl mx-auto px-4 sm:px-6 md:px-0 overflow-x-hidden">
      <!-- Mailing List Form -->
      <div class="bg-special-lighter rounded-lg p-4 sm:p-6 md:p-8 mb-8">
        <h3 class="text-xl font-semibold mb-4 text-center gradient-brand-text">
          Join Our Mailing List
        </h3>
        <form
          class="flex flex-col md:flex-row gap-3 md:gap-4 max-w-lg mx-auto"
          action="#"
          method="POST"
        >
          <input
            type="email"
            name="email"
            placeholder="Enter your email"
            required
            class="w-full md:flex-1 min-w-0 px-3 sm:px-4 py-2 rounded-lg border border-color-300 dark:border-color-700 bg-surface focus:outline-none focus:ring-2 focus:ring-accent-one"
          />
          <CallToActionButton
            type="submit"
            text="Subscribe"
            size="medium"
            class="w-full md:w-auto whitespace-nowrap"
          />
        </form>
      </div>
    </div>
  </Section>
</PageLayout>
