---
import { Icon } from "astro-icon/components";

export interface Props {
  label: string;
  value: string;
  icon?: string;
  link?: string;
  external?: boolean;
  className?: string;
}

const {
  label,
  value,
  icon = "solar:info-circle-line-duotone",
  link,
  external = false,
  className = "",
} = Astro.props;

// If there's a link, make the whole item clickable
const isClickable = !!link;
---

{
  isClickable ? (
    <a
      href={link}
      target={external ? "_blank" : undefined}
      rel={external ? "noopener noreferrer" : undefined}
      class={`metadata-item group flex items-start gap-3 hover:bg-accent-one/5 p-2 -m-2 rounded-lg transition-colors ${className}`}
    >
      <Icon
        name={icon}
        class="text-accent-two mt-0.5 w-4 h-4 flex-shrink-0 group-hover:text-accent-base transition-colors"
      />
      <div class="flex-1 min-w-0">
        <div class="text-xs font-medium text-color-600 dark:text-color-400 mb-0.5">
          {label}
        </div>
        <div class="text-sm text-color-800 dark:text-color-200 group-hover:text-accent-base transition-colors">
          {value}
        </div>
      </div>
      {external && (
        <Icon
          name="solar:arrow-up-right-linear"
          class="text-color-500 w-3 h-3 mt-0.5 group-hover:text-accent-base transition-colors"
        />
      )}
    </a>
  ) : (
    <div class={`metadata-item flex items-start gap-3 ${className}`}>
      <Icon
        name={icon}
        class="text-accent-two mt-0.5 w-4 h-4 flex-shrink-0"
      />
      <div class="flex-1 min-w-0">
        <div class="text-xs font-medium text-color-600 dark:text-color-400 mb-0.5">
          {label}
        </div>
        <div class="text-sm text-color-800 dark:text-color-200">
          {value}
        </div>
      </div>
    </div>
  )
}

<style>
  .metadata-item {
    text-decoration: none;
  }

  a.metadata-item:hover {
    text-decoration: none;
  }

  a.metadata-item:focus-visible {
    outline: 2px solid rgb(var(--color-accent-base));
    outline-offset: 2px;
    border-radius: 0.5rem;
  }
</style>
