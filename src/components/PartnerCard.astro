---
import Card from "./Card.astro";

export interface Props {
  name: string;
  description?: string;
  logo?: ImageMetadata;
  logoUrl?: string;
  link?: string;
  type?: string;
  category?: string;
  featured?: boolean;
  isHighlighted?: boolean;
  class?: string;
}

const {
  name,
  description,
  logo,
  logoUrl,
  link,
  type,
  category,
  featured,
  isHighlighted = false,
  class: className = "",
} = Astro.props;

// Format the type for display
const typeLabel = type
  ? type.charAt(0).toUpperCase() + type.slice(1)
  : undefined;

// Create featured status
const status = featured
  ? {
      label: "Featured",
      color: "bg-yellow-500/20 text-yellow-600 dark:text-yellow-400",
    }
  : undefined;

// Build subtitle from type and category
const subtitleParts = [];
if (typeLabel) {
  subtitleParts.push(typeLabel);
}
if (category) {
  subtitleParts.push(category.charAt(0).toUpperCase() + category.slice(1));
}
const subtitle = subtitleParts.join(" â€¢ ");
---

<Card
  title={name}
  subtitle={subtitle || undefined}
  description={description}
  image={logo}
  imageUrl={logoUrl}
  imageAlt={`${name} logo`}
  imageClass="p-4 max-h-20 object-contain bg-surface"
  link={link}
  linkTarget={link?.startsWith("http") ? "_blank" : undefined}
  linkRel={link?.startsWith("http") ? "noopener noreferrer" : undefined}
  status={status}
  isHighlighted={isHighlighted}
  hoverEffect={true}
  class={`partner-card ${className}`}
>
  <slot />
</Card>
