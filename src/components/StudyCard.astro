---
import Card from "./Card.astro";

export interface Props {
  title: string;
  description?: string;
  authors?: string[];
  date?: Date | string;
  tags?: string[];
  link?: string;
  image?: ImageMetadata;
  imageUrl?: string;
  featured?: boolean;
}

const {
  title,
  description,
  authors = [],
  date,
  tags = [],
  link,
  image,
  imageUrl,
  featured = false,
} = Astro.props;

// Format date if provided
const formattedDate = date
  ? new Date(date).toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
    })
  : undefined;

// Build subtitle from authors and date
const subtitleParts = [];
if (authors.length > 0) {
  subtitleParts.push(authors.join(", "));
}
if (formattedDate) {
  subtitleParts.push(formattedDate);
}
const subtitle = subtitleParts.join(" â€¢ ");
---

<Card
  variant="default"
  title={title}
  subtitle={subtitle}
  description={description}
  image={image}
  imageUrl={imageUrl}
  imageAlt={`${title} study`}
  link={link}
  isHighlighted={featured}
  class="study-card"
>
  {tags.length > 0 && (
    <div class="mt-3 flex flex-wrap gap-2">
      {tags.map((tag) => (
        <span class="inline-block px-2 py-1 text-xs font-medium bg-accent-two/10 text-accent-two rounded">
          {tag}
        </span>
      ))}
    </div>
  )}
</Card>
