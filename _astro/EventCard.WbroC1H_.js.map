{"version":3,"file":"EventCard.WbroC1H_.js","sources":["../../node_modules/@solar-icons/react-perf/dist/esm/icons/map/LineDuotone/MapPoint.mjs","../../src/utils/date.ts","../../src/utils/events.ts","../../src/components/cards/EventCard.tsx"],"sourcesContent":["import e, { forwardRef as o } from \"react\";\nimport c from \"../../../lib/IconBase.mjs\";\nconst a = o((t, r) => /* @__PURE__ */ e.createElement(c, { ref: r, ...t }, /* @__PURE__ */ e.createElement(\"path\", { opacity: \"0.5\", d: \"M4 10.1433C4 5.64588 7.58172 2 12 2C16.4183 2 20 5.64588 20 10.1433C20 14.6055 17.4467 19.8124 13.4629 21.6744C12.5343 22.1085 11.4657 22.1085 10.5371 21.6744C6.55332 19.8124 4 14.6055 4 10.1433Z\", stroke: \"currentColor\", strokeWidth: \"1.5\" }), /* @__PURE__ */ e.createElement(\"circle\", { cx: \"12\", cy: \"10\", r: \"3\", stroke: \"currentColor\", strokeWidth: \"1.5\" })));\na.displayName = \"MapPoint\";\nexport {\n  a as MapPoint\n};\n","import type { CollectionEntry } from \"astro:content\";\nimport { siteConfig } from \"@/site.config\";\n\nfunction resolveLocale(): string {\n  const configured = siteConfig.date?.locale;\n  if (Array.isArray(configured)) {\n    return configured[0] ?? \"en-US\";\n  }\n  return configured ?? \"en-US\";\n}\n\nconst DEFAULT_LOCALE = resolveLocale();\nconst DEFAULT_OPTIONS: Intl.DateTimeFormatOptions = {\n  year: \"numeric\",\n  month: \"short\",\n  day: \"numeric\",\n  ...(siteConfig.date?.options as Intl.DateTimeFormatOptions | undefined),\n};\nconst ENGLISH_MONTHS = [\n  \"Jan\",\n  \"Feb\",\n  \"Mar\",\n  \"Apr\",\n  \"May\",\n  \"Jun\",\n  \"Jul\",\n  \"Aug\",\n  \"Sep\",\n  \"Oct\",\n  \"Nov\",\n  \"Dec\",\n];\n\nconst NARROW_SPACE_REGEX = /[\\u202F\\u00A0\\u2009]/g;\nconst EN_DASH_SPACING_REGEX = /\\s*–\\s*/g;\n\nfunction buildFormatConfig(options?: Intl.DateTimeFormatOptions) {\n  return {\n    locale: DEFAULT_LOCALE,\n    options: {\n      ...DEFAULT_OPTIONS,\n      ...options,\n    },\n  };\n}\n\nfunction normalizeMonthValue(\n  monthValue: string,\n  monthIndex: number,\n  locale: string,\n): string {\n  if (Number.isNaN(monthIndex) || monthIndex < 0 || monthIndex > 11) {\n    return monthValue;\n  }\n\n  const normalizedLocale = locale?.toLowerCase() ?? \"\";\n  if (normalizedLocale.startsWith(\"en\")) {\n    return ENGLISH_MONTHS[monthIndex] ?? monthValue;\n  }\n\n  return monthValue;\n}\n\nfunction normalizeWhitespace(value: string): string {\n  return value\n    .replace(NARROW_SPACE_REGEX, \" \")\n    .replace(EN_DASH_SPACING_REGEX, \" – \");\n}\n\nfunction formatDateWithParts(\n  date: Date,\n  locale: string,\n  options: Intl.DateTimeFormatOptions,\n): string {\n  const formatter = new Intl.DateTimeFormat(locale, options);\n  if (typeof formatter.formatToParts === \"function\") {\n    const parts = formatter.formatToParts(date).map((part) => {\n      if (part.type === \"month\") {\n        return {\n          ...part,\n          value: normalizeMonthValue(part.value, date.getMonth(), locale),\n        };\n      }\n      return part;\n    });\n    return normalizeWhitespace(parts.map((part) => part.value).join(\"\"));\n  }\n\n  return normalizeWhitespace(formatter.format(date));\n}\n\nfunction formatDateRangeWithParts(\n  startDate: Date,\n  endDate: Date,\n  locale: string,\n  options: Intl.DateTimeFormatOptions,\n): string {\n  const formatter = new Intl.DateTimeFormat(locale, options);\n\n  if (typeof formatter.formatRangeToParts === \"function\") {\n    const parts = formatter\n      .formatRangeToParts(startDate, endDate)\n      .map((part) => {\n        if (part.type === \"month\") {\n          const dateForPart =\n            part.source === \"endRange\"\n              ? endDate\n              : part.source === \"startRange\"\n                ? startDate\n                : startDate;\n          return {\n            ...part,\n            value: normalizeMonthValue(\n              part.value,\n              dateForPart.getMonth(),\n              locale,\n            ),\n          };\n        }\n        return part;\n      });\n\n    return normalizeWhitespace(parts.map((part) => part.value).join(\"\"));\n  }\n\n  if (typeof formatter.formatRange === \"function\") {\n    return normalizeWhitespace(formatter.formatRange(startDate, endDate));\n  }\n\n  const start = formatDateWithParts(startDate, locale, options);\n  const end = formatDateWithParts(endDate, locale, options);\n  if (start === end) {\n    return start;\n  }\n  return `${start} – ${end}`;\n}\n\nexport function getFormattedDate(\n  date: Date | undefined,\n  options?: Intl.DateTimeFormatOptions,\n): string {\n  if (date === undefined) {\n    return \"Invalid Date\";\n  }\n\n  const { locale, options: formatOptions } = buildFormatConfig(options);\n  return formatDateWithParts(date, locale, formatOptions);\n}\n\n/**\n * Parse a date-only value (YYYY-MM-DD) as a local calendar date to avoid\n * timezone shifts. Falls back to the native Date constructor if the string\n * is not in date-only form.\n */\nexport function parseDateLocal(value?: string | number | Date | null): Date {\n  if (value instanceof Date) {\n    return new Date(\n      value.getUTCFullYear(),\n      value.getUTCMonth(),\n      value.getUTCDate(),\n    );\n  }\n  if (value === undefined || value === null) return new Date(NaN);\n  if (typeof value === \"number\") return new Date(value);\n\n  const stringValue = String(value);\n  const isoMatch = stringValue.match(/^(\\d{4})-(\\d{2})-(\\d{2})/);\n  if (isoMatch) {\n    const [, year, month, day] = isoMatch;\n    return new Date(Number(year), Number(month) - 1, Number(day));\n  }\n\n  return new Date(stringValue);\n}\n\nexport function collectionDateSort<T extends CollectionEntry<any>>(\n  a: T & { data: { publishDate: Date } },\n  b: T & { data: { publishDate: Date } },\n) {\n  return b.data.publishDate.getTime() - a.data.publishDate.getTime();\n}\n\nexport function getFormattedDateRanges(\n  date1: Date,\n  date2?: Date,\n  options?: Intl.DateTimeFormatOptions,\n): string {\n  const { locale, options: formatOptions } = buildFormatConfig(options);\n\n  if (!date2 || date1.getTime() === date2.getTime()) {\n    return formatDateWithParts(date1, locale, formatOptions);\n  }\n\n  return formatDateRangeWithParts(date1, date2, locale, formatOptions);\n}\n","import { getFormattedDateRanges, parseDateLocal } from \"./date\";\n\ninterface PartialEvent {\n  description?: string;\n  startDate: Date | string;\n  endDate?: Date | string;\n  location?: {\n    city?: string;\n    country?: string;\n    online?: boolean;\n  };\n}\n\nexport function getEventPreviewDescriptionText(event: PartialEvent): string {\n  const locationString = getLocationString(event.location);\n\n  const start = parseDateLocal(event.startDate);\n  const end = parseDateLocal(event.endDate ?? event.startDate);\n\n  const dateString = getFormattedDateRanges(start, end);\n\n  return getDescription(dateString, event.description, locationString);\n}\n\nexport function getLocationString(location?: {\n  city?: string;\n  country?: string;\n  online?: boolean;\n}): string | undefined {\n  if (!location) return undefined;\n  if (location.city && location.country)\n    return `${location.city}, ${location.country}`;\n  if (location.country) return location.country;\n  if (location.online) return \"Online\";\n  return undefined;\n}\n\nfunction getDescription(\n  dateString: string,\n  descriptionString?: string,\n  locationString?: string,\n): string {\n  if (locationString) {\n    return `${dateString} • ${locationString}`;\n  } else if (descriptionString) {\n    return `${dateString} • ${descriptionString}`;\n  } else {\n    return dateString;\n  }\n}\n","import { useMemo, type FC } from \"react\";\nimport { ItemCard } from \"@/components/cards/ItemCard\";\nimport { getLocationString } from \"@/utils/events\";\nimport { getFormattedDateRanges, parseDateLocal } from \"@/utils/date\";\nimport { Calendar, MapPoint } from \"@solar-icons/react-perf/LineDuotone\";\nimport type { FeaturedState } from \"../ui/FeaturedStar\";\nimport {\n  resolveCardImagePolicy,\n  resolveLogoAsset,\n  type ImageLike,\n  type ImagePolicy,\n} from \"@/utils/images\";\n\nexport interface EventCardProps {\n  eventId: string;\n  data: {\n    name?: string;\n    displayName?: string;\n    description?: string;\n    startDate: Date | string;\n    endDate?: Date | string;\n    type: string;\n    images?: {\n      logo?: ImageLike;\n      hero?: ImageLike;\n    };\n    imagePolicy?: ImagePolicy;\n    links?: {\n      website?: string;\n      registration?: string;\n      program?: string;\n      proceedings?: string;\n      recordings?: string;\n    };\n    location?: {\n      city?: string;\n      country?: string;\n      online?: boolean;\n    };\n    featured?: boolean;\n  };\n  className?: string;\n}\n\nexport const EventCard: FC<EventCardProps> = ({ eventId, data }) => {\n  // Determine status based on dates\n  const now = new Date();\n  const startDate = parseDateLocal(data.startDate);\n  const endDate = data.endDate ? parseDateLocal(data.endDate) : startDate;\n\n  let status = \"upcoming\";\n  if (now >= startDate && now <= endDate) {\n    status = \"happening now\";\n  } else if (now > endDate) {\n    status = \"past\";\n  }\n\n  // Build category from event type\n  const category = `${data.type.charAt(0).toUpperCase() + data.type.slice(1)}`;\n\n  const locationString = getLocationString(data.location);\n\n  const dateString = getFormattedDateRanges(startDate, endDate);\n\n  const featuredState: FeaturedState = useMemo(() => {\n    if (status === \"past\" && data.featured) return \"previously-featured\";\n    if (data.featured) return \"featured\";\n    return \"not-featured\";\n  }, [status, data.featured]);\n\n  const cardImages = resolveCardImagePolicy({\n    hero: data.images?.hero,\n    logoOrAvatar: resolveLogoAsset(data.images),\n    policy: data.imagePolicy,\n  });\n\n  return (\n    <ItemCard\n      title={data.displayName || data.name || eventId}\n      // description={description}\n      listItems={[\n        {\n          text: dateString,\n          icon: (\n            <Calendar className=\"text-accent-two mt-0.5 w-4 h-4 shrink-0\" />\n          ),\n        },\n        {\n          text: locationString ?? \"Unknown Location\",\n          icon: (\n            <MapPoint className=\"text-accent-two mt-0.5 w-4 h-4 shrink-0\" />\n          ),\n        },\n      ]}\n      href={`/events/${eventId}`}\n      type=\"events\"\n      image={cardImages.image}\n      imageAlt={data.name}\n      logo={cardImages.logo}\n      showFallbackAvatar={cardImages.showFallbackIcon}\n      logoBackdrop={cardImages.logoBackdrop}\n      status={status}\n      category={category}\n      featuredState={featuredState}\n      links={{\n        website: data.links?.website,\n        registration: data.links?.registration,\n      }}\n    />\n  );\n};\n"],"names":["a","o","t","r","e","c","resolveLocale","configured","siteConfig","DEFAULT_LOCALE","DEFAULT_OPTIONS","ENGLISH_MONTHS","NARROW_SPACE_REGEX","EN_DASH_SPACING_REGEX","buildFormatConfig","options","normalizeMonthValue","monthValue","monthIndex","locale","normalizeWhitespace","value","formatDateWithParts","date","formatter","parts","part","formatDateRangeWithParts","startDate","endDate","dateForPart","start","end","parseDateLocal","stringValue","isoMatch","year","month","day","getFormattedDateRanges","date1","date2","formatOptions","getLocationString","location","EventCard","eventId","data","now","status","category","locationString","dateString","featuredState","useMemo","cardImages","resolveCardImagePolicy","resolveLogoAsset","jsx","ItemCard","Calendar","MapPoint"],"mappings":"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","x_google_ignoreList":[0]}