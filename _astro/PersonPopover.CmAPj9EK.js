import{j as t}from"./jsx-runtime.D_zvdyIk.js";import{r as i,R as P}from"./index.BdSgv7Tv.js";import{m as U,c as w,u as B,a as K,b as O,d as C,P as _,e as V,D as Z}from"./index.CjSrtr71.js";import{h as q,R as J,u as Q,F as X}from"./Combination.x7STMSjc.js";import{a as y,R as Y,A,b as ee,d as te}from"./links.DpyB0fy3.js";import{A as R,a as oe}from"./Avatar.M7PYyH_t.js";/* empty css                        */import re from"./LinkSection.DJYnrcjk.js";import"./index.BH4_NjwE.js";import"./Document2.D8zIYDIo.js";const E=i.forwardRef((e,n)=>P.createElement(U,{ref:n,...e},P.createElement("circle",{cx:"12",cy:"6",r:"4",stroke:"currentColor",strokeWidth:"1.5"}),P.createElement("circle",{cx:"17",cy:"18",r:"4",stroke:"currentColor",strokeWidth:"1.5"}),P.createElement("path",{d:"M20 15L14 21",stroke:"currentColor",strokeWidth:"1.5"}),P.createElement("path",{opacity:"0.5",d:"M14 20.8344C13.3663 20.9421 12.695 21 12 21C8.13401 21 5 19.2091 5 17C5 14.7909 8.13401 13 12 13C13.7135 13 15.2832 13.3518 16.5 13.9359",stroke:"currentColor",strokeWidth:"1.5"})));E.displayName="UserBlockRounded";function ne(e,n=[]){let r=[];function a(o,c){const l=i.createContext(c),p=r.length;r=[...r,c];const d=x=>{const{scope:u,children:v,...g}=x,H=u?.[e]?.[p]||l,G=i.useMemo(()=>g,Object.values(g));return t.jsx(H.Provider,{value:G,children:v})};d.displayName=o+"Provider";function m(x,u){const v=u?.[e]?.[p]||l,g=i.useContext(v);if(g)return g;if(c!==void 0)return c;throw new Error(`\`${x}\` must be used within \`${o}\``)}return[d,m]}const s=()=>{const o=r.map(c=>i.createContext(c));return function(l){const p=l?.[e]||o;return i.useMemo(()=>({[`__scope${e}`]:{...l,[e]:p}}),[l,p])}};return s.scopeName=e,[a,se(s,...n)]}function se(...e){const n=e[0];if(e.length===1)return n;const r=()=>{const a=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const c=a.reduce((l,{useScope:p,scopeName:d})=>{const x=p(o)[`__scope${d}`];return{...l,...x}},{});return i.useMemo(()=>({[`__scope${n.scopeName}`]:c}),[c])}};return r.scopeName=n.scopeName,r}var ae=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],k=ae.reduce((e,n)=>{const r=w(`Primitive.${n}`),a=i.forwardRef((s,o)=>{const{asChild:c,...l}=s,p=c?r:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(p,{...l,ref:o})});return a.displayName=`Primitive.${n}`,{...e,[n]:a}},{}),j="Popover",[S]=ne(j,[y]),b=y(),[ce,f]=S(j),F=e=>{const{__scopePopover:n,children:r,open:a,defaultOpen:s,onOpenChange:o,modal:c=!1}=e,l=b(n),p=i.useRef(null),[d,m]=i.useState(!1),[x,u]=B({prop:a,defaultProp:s??!1,onChange:o,caller:j});return t.jsx(Y,{...l,children:t.jsx(ce,{scope:n,contentId:K(),triggerRef:p,open:x,onOpenChange:u,onOpenToggle:i.useCallback(()=>u(v=>!v),[u]),hasCustomAnchor:d,onCustomAnchorAdd:i.useCallback(()=>m(!0),[]),onCustomAnchorRemove:i.useCallback(()=>m(!1),[]),modal:c,children:r})})};F.displayName=j;var M="PopoverAnchor",ie=i.forwardRef((e,n)=>{const{__scopePopover:r,...a}=e,s=f(M,r),o=b(r),{onCustomAnchorAdd:c,onCustomAnchorRemove:l}=s;return i.useEffect(()=>(c(),()=>l()),[c,l]),t.jsx(A,{...o,...a,ref:n})});ie.displayName=M;var D="PopoverTrigger",I=i.forwardRef((e,n)=>{const{__scopePopover:r,...a}=e,s=f(D,r),o=b(r),c=O(n,s.triggerRef),l=t.jsx(k.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":z(s.open),...a,ref:c,onClick:C(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:t.jsx(A,{asChild:!0,...o,children:l})});I.displayName=D;var N="PopoverPortal",[le,pe]=S(N,{forceMount:void 0}),$=e=>{const{__scopePopover:n,forceMount:r,children:a,container:s}=e,o=f(N,n);return t.jsx(le,{scope:n,forceMount:r,children:t.jsx(_,{present:r||o.open,children:t.jsx(V,{asChild:!0,container:s,children:a})})})};$.displayName=N;var h="PopoverContent",T=i.forwardRef((e,n)=>{const r=pe(h,e.__scopePopover),{forceMount:a=r.forceMount,...s}=e,o=f(h,e.__scopePopover);return t.jsx(_,{present:a||o.open,children:o.modal?t.jsx(de,{...s,ref:n}):t.jsx(xe,{...s,ref:n})})});T.displayName=h;var ue=w("PopoverContent.RemoveScroll"),de=i.forwardRef((e,n)=>{const r=f(h,e.__scopePopover),a=i.useRef(null),s=O(n,a),o=i.useRef(!1);return i.useEffect(()=>{const c=a.current;if(c)return q(c)},[]),t.jsx(J,{as:ue,allowPinchZoom:!0,children:t.jsx(L,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:C(e.onCloseAutoFocus,c=>{c.preventDefault(),o.current||r.triggerRef.current?.focus()}),onPointerDownOutside:C(e.onPointerDownOutside,c=>{const l=c.detail.originalEvent,p=l.button===0&&l.ctrlKey===!0,d=l.button===2||p;o.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:C(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),xe=i.forwardRef((e,n)=>{const r=f(h,e.__scopePopover),a=i.useRef(!1),s=i.useRef(!1);return t.jsx(L,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{e.onCloseAutoFocus?.(o),o.defaultPrevented||(a.current||r.triggerRef.current?.focus(),o.preventDefault()),a.current=!1,s.current=!1},onInteractOutside:o=>{e.onInteractOutside?.(o),o.defaultPrevented||(a.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=o.target;r.triggerRef.current?.contains(c)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),L=i.forwardRef((e,n)=>{const{__scopePopover:r,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:c,onEscapeKeyDown:l,onPointerDownOutside:p,onFocusOutside:d,onInteractOutside:m,...x}=e,u=f(h,r),v=b(r);return Q(),t.jsx(X,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:s,onUnmountAutoFocus:o,children:t.jsx(Z,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:m,onEscapeKeyDown:l,onPointerDownOutside:p,onFocusOutside:d,onDismiss:()=>u.onOpenChange(!1),children:t.jsx(ee,{"data-state":z(u.open),role:"dialog",id:u.contentId,...v,...x,ref:n,style:{...x.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),W="PopoverClose",fe=i.forwardRef((e,n)=>{const{__scopePopover:r,...a}=e,s=f(W,r);return t.jsx(k.button,{type:"button",...a,ref:n,onClick:C(e.onClick,()=>s.onOpenChange(!1))})});fe.displayName=W;var me="PopoverArrow",ve=i.forwardRef((e,n)=>{const{__scopePopover:r,...a}=e,s=b(r);return t.jsx(te,{...s,...a,ref:n})});ve.displayName=me;function z(e){return e?"open":"closed"}var he=F,ge=I,Pe=$,Ce=T;function ke({person:e,role:n,currentAffiliation:r}){if(!e)return t.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-surface rounded-full",children:[t.jsx(E,{className:"w-5 h-5 text-neutral-400"}),t.jsx("span",{className:"text-sm text-neutral-500",children:"Unknown Person"})]});const a=e.honorific?`${e.honorific} ${e.name}`:e.name,s=o=>{o.stopPropagation(),o.preventDefault(),window.location.href=`/people/${e.id}`};return t.jsxs(he,{children:[t.jsx(ge,{asChild:!0,children:t.jsxs("button",{className:"inline-flex items-center gap-2 pl-2 pr-3 py-1.5 bg-surface-lighter rounded-full border-2 border-accent-one/40 hover:border-accent-one data-[state=open]:border-accent-two hover:data-[state=closed]:border-accent-one transition-all cursor-pointer focus:outline-none focus:border-accent-two",children:[t.jsx(R,{src:e.images?.avatar,alt:a,name:e.name,type:"person",size:"xs"}),t.jsx("span",{className:"text-sm font-medium",children:a}),n&&t.jsxs("span",{className:"text-xs text-color-600 dark:text-color-400",children:["â€¢ ",n]})]})}),t.jsx(Pe,{children:t.jsxs(Ce,{className:"popover-content w-80 p-4 bg-surface rounded-lg shadow-xl border border-accent-base/50 outline-hidden",sideOffset:5,align:"start",children:[t.jsxs("a",{href:`/people/${e.id}`,className:"flex items-start gap-4 no-underline hover:opacity-90 transition-opacity",children:[t.jsx("div",{className:"flex-shrink-0 mt-3",children:t.jsx(R,{src:e.images?.avatar,alt:a,name:a,type:"person",size:"lg"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("h4",{className:"font-semibold text-base text-color",children:[a,e.pronouns&&t.jsxs("span",{className:"ml-2 text-xs font-normal text-accent-base",children:["(",e.pronouns,")"]})]}),e.title&&t.jsx("p",{className:"text-sm text-accent-base",children:e.title}),r&&t.jsxs("p",{className:"text-xs text-accent-base mt-1",children:[r.role," at"," ",r.partnerName||r.organizationId]})]})]}),e.bio&&t.jsx("p",{className:"mt-3 text-sm text-accent-base line-clamp-3",children:e.bio}),e.expertise&&e.expertise.length>0&&t.jsxs("div",{className:"mt-3",children:[t.jsx("p",{className:"text-xs font-semibold mb-1 text-neutral-600 dark:text-neutral-400",children:"Expertise:"}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.expertise.slice(0,5).map(o=>t.jsx("span",{className:"text-xs px-2 py-0.5 bg-accent-two/10 rounded",children:o},o)),e.expertise.length>5&&t.jsxs("span",{className:"text-xs px-2 py-0.5 text-neutral-500",children:["+",e.expertise.length-5," more"]})]})]}),t.jsxs("div",{className:"mt-3 pt-3 border-t border-neutral-200 dark:border-neutral-700 flex flex-wrap gap-3 text-xs justify-between",children:[t.jsxs("button",{onClick:s,className:"text-accent-one hover:text-accent-two transition-colors flex items-center gap-1 font-medium focus:outline-none",children:[t.jsx(oe,{className:"w-3 h-3"}),"View Profile"]}),t.jsx(re,{links:e.links,size:"sm",max:5,as:"button",external:!0,stopPropagation:!0})]})]})})]})}export{ke as PersonPopover};
//# sourceMappingURL=PersonPopover.CmAPj9EK.js.map
