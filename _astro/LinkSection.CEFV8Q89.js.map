{"version":3,"file":"LinkSection.CEFV8Q89.js","sources":["../../src/components/detail/LinkSection.tsx"],"sourcesContent":["import React, { useMemo } from \"react\";\nimport { clsx } from \"clsx\";\nimport {\n  IconButton,\n  type IconButtonSize,\n  type LinkType,\n} from \"@/components/ui/IconButton\";\nimport { linkPriority, normalizeLinkHref } from \"@/data/links\";\n\nexport interface LinkSectionProps {\n  // Map of link type to value (URL, handle, email, etc.)\n  links?: Partial<Record<LinkType, string>>;\n  // Optional: include only these link types\n  allowed?: LinkType[];\n  // Optional: max number of buttons to show (defaults to all)\n  max?: number;\n  // Icon size for each button\n  size?: IconButtonSize;\n  // Extra classes for the container\n  className?: string;\n  // Force IconButton rendering type\n  as?: \"button\" | \"link\";\n  // Prevent parent navigation when clicking buttons\n  stopPropagation?: boolean;\n  // Force external behavior (otherwise detected automatically)\n  external?: boolean;\n}\n\ntype LinkEntry = { type: LinkType; href: string };\n\nfunction buildPrioritizedLinks(\n  links?: Partial<Record<LinkType, string>>,\n  allowed?: LinkType[],\n  max?: number,\n): LinkEntry[] {\n  if (!links) return [];\n\n  const seen = new Set<string>();\n  const items: LinkEntry[] = [];\n\n  const pushIfValid = (type: LinkType, raw?: string) => {\n    if (!raw) return;\n    if (allowed && !allowed.includes(type)) return;\n\n    const href = normalizeLinkHref(type, raw);\n    const key = `${type}:${href}`;\n    if (seen.has(key)) return;\n\n    seen.add(key);\n    items.push({ type, href });\n  };\n\n  // First pass: known link types in configured priority,\n  // then reverse so we render increasing priority from left to right.\n  linkPriority.forEach((t) => {\n    pushIfValid(t, links[t]);\n  });\n\n  // Second pass: any extra/unknown keys not covered by linkPriority\n  // (append these after the prioritized set).\n  Object.entries(links).forEach(([rawType, raw]) => {\n    const t = rawType as LinkType;\n    if (linkPriority.includes(t)) return; // already handled\n    pushIfValid(t, raw || undefined);\n  });\n\n  const ordered = items.reverse(); // increasing priority left -> right\n  return typeof max === \"number\" && max > 0 ? ordered.slice(0, max) : ordered;\n}\n\n/**\n * LinkSection\n * Renders a single-row list of circular IconButtons, ordered from\n * lower to higher priority (left to right). When overflow occurs,\n * it scrolls horizontally.\n */\nexport const LinkSection: React.FC<LinkSectionProps> = ({\n  links,\n  allowed,\n  max,\n  size = \"md\",\n  className,\n  as,\n  stopPropagation,\n  external,\n}) => {\n  const buttons = useMemo(\n    () => buildPrioritizedLinks(links, allowed, max),\n    [links, allowed, max],\n  );\n\n  if (!buttons.length) return null;\n\n  return (\n    <div\n      className={clsx(\n        \"flex items-center justify-end gap-1 flex-nowrap overflow-x-auto\",\n        className,\n      )}\n    >\n      {buttons.map(({ type, href }) => (\n        <IconButton\n          key={`${type}-${href}`}\n          type={type}\n          href={href}\n          size={size}\n          as={as}\n          external={external}\n          stopPropagation={stopPropagation}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default LinkSection;\n"],"names":["buildPrioritizedLinks","links","allowed","max","seen","items","pushIfValid","type","raw","href","normalizeLinkHref","key","linkPriority","t","rawType","ordered","LinkSection","size","className","as","stopPropagation","external","buttons","useMemo","jsx","clsx","IconButton"],"mappings":"gNA8BA,SAASA,EACPC,EACAC,EACAC,EACa,CACb,GAAI,CAACF,EAAO,MAAO,CAAA,EAEnB,MAAMG,MAAW,IACXC,EAAqB,CAAA,EAErBC,EAAc,CAACC,EAAgBC,IAAiB,CAEpD,GADI,CAACA,GACDN,GAAW,CAACA,EAAQ,SAASK,CAAI,EAAG,OAExC,MAAME,EAAOC,EAAkBH,EAAMC,CAAG,EAClCG,EAAM,GAAGJ,CAAI,IAAIE,CAAI,GACvBL,EAAK,IAAIO,CAAG,IAEhBP,EAAK,IAAIO,CAAG,EACZN,EAAM,KAAK,CAAE,KAAAE,EAAM,KAAAE,CAAA,CAAM,EAC3B,EAIAG,EAAa,QAASC,GAAM,CAC1BP,EAAYO,EAAGZ,EAAMY,CAAC,CAAC,CACzB,CAAC,EAID,OAAO,QAAQZ,CAAK,EAAE,QAAQ,CAAC,CAACa,EAASN,CAAG,IAAM,CAChD,MAAM,EAAIM,EACNF,EAAa,SAAS,CAAC,GAC3BN,EAAY,EAAGE,GAAO,MAAS,CACjC,CAAC,EAED,MAAMO,EAAUV,EAAM,QAAA,EACtB,OAAO,OAAOF,GAAQ,UAAYA,EAAM,EAAIY,EAAQ,MAAM,EAAGZ,CAAG,EAAIY,CACtE,CAQO,MAAMC,EAA0C,CAAC,CACtD,MAAAf,EACA,QAAAC,EACA,IAAAC,EACA,KAAAc,EAAO,KACP,UAAAC,EACA,GAAAC,EACA,gBAAAC,EACA,SAAAC,CACF,IAAM,CACJ,MAAMC,EAAUC,EAAAA,QACd,IAAMvB,EAAsBC,EAAOC,EAASC,CAAG,EAC/C,CAACF,EAAOC,EAASC,CAAG,CAAA,EAGtB,OAAKmB,EAAQ,OAGXE,EAAAA,IAAC,MAAA,CACC,UAAWC,EACT,kEACAP,CAAA,EAGD,WAAQ,IAAI,CAAC,CAAE,KAAAX,EAAM,KAAAE,KACpBe,EAAAA,IAACE,EAAA,CAEC,KAAAnB,EACA,KAAAE,EACA,KAAAQ,EACA,GAAAE,EACA,SAAAE,EACA,gBAAAD,CAAA,EANK,GAAGb,CAAI,IAAIE,CAAI,EAAA,CAQvB,CAAA,CAAA,EAnBuB,IAsB9B"}